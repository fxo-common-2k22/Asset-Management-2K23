@model List<FAPP.Models.ActionLinks>
@using FAPP.Models
@helper  TopMenu(List<ActionLinks> nodeList)
    {
        var parentId = nodeList.Where(s => s.ParentForm == null).Select(s => s.FormId).FirstOrDefault();
        <ul class='main-nav'>
            @foreach (var node in nodeList.Where(s => s.ParentForm == parentId && s.IsMenuItem == true))
            {
                if (node.FormId == 10606)
                {
                    int val = node.FormId;
                }
                string url = !string.IsNullOrEmpty(node.FormUrl) ? node.FormUrl : "#";

                <li class="dropdown">
                    <a href="#" class="dropdown-toggle " data-toggle="dropdown">
                        @node.FormName
                        <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                        @if (nodeList.Where(s => s.ParentForm == node.FormId && s.IsMenuItem == true).Any())
                        {
                            @DropDownMenu(nodeList, node.FormId)
                        }

                    </ul>
                </li>
            }
        </ul>
}

@helper DropDownMenu(List<ActionLinks> nodeList, int parentId)
    {
        foreach (var child in nodeList.Where(s => s.ParentForm == parentId && s.IsMenuItem == true))
        {
            if (nodeList.Where(s => s.ParentForm == child.FormId && s.IsMenuItem == true).Any())
            {
                if (child.IsHideChilds)
                {
                    <li>
                        <a href="@child.FormUrl">@child.FormName</a>
                    </li>
                }
                else
                {
                    <li class="dropdown-submenu">
                        <a href="@child.FormUrl" class="dropdown-toggle " data-toggle="dropdown">
                            @child.FormName
                        </a>
                        <ul class="dropdown-menu">
                            @DropDownMenu(nodeList, child.FormId)
                        </ul>
                    </li>
                }
            }
            else
            {
                if (child.FormName == "Dashboard")
                {
                    <li>
                        <a href="@child.FormUrl">
                            <strong>
                                @child.FormName
                            </strong>
                        </a>
                    </li>
                    <li class="divider"></li>
                }
                else
                {
                    <li>
                        <a href="@child.FormUrl">@child.FormName</a>
                    </li>
                }
            }

        }
}
@TopMenu(Model.OrderBy(s => s.MenuPriority).ToList())