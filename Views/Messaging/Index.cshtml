@model FAPP.ViewModel.MessagingVM
@{

    ViewBag.Title = $@"SMS Queue";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link href="~/Content/ezSchoolStyle.css" rel="stylesheet" />
@section PageHeader {

}
@section TopRightMenu{
    <ul class="minitiles">
        <li class="blue" style="margin-right:0">
            <a href="@Url.Action("Templates","Messaging",new { id = Model.ModuleId })" data-toggle="tooltip" title="Dashboard">
                <i class="fa fa-tachometer"></i>
            </a>
        </li>
        <li class="darkblue" style="margin-right:0">
            <a href="@Url.Action("Batch","Messaging",new { id = Model.ModuleId})" data-toggle="tooltip" title="SMS Batches">
                <i class="fa fa-bars"></i>
            </a>
        </li>
        <li class="green" style="margin-right:0">
            <a href="@Url.Action("NotificationSettings","Messaging",new { id = Model.ModuleId})" data-toggle="tooltip" title="SMS Batches">
                <i class="fa fa-cogs"></i>
            </a>
        </li>
        @*<li class="blue">
                <a href="@Url.Action("Create","Applicants")" data-toggle="tooltip" title="Add New Applicant">
                    <i class="fa fa-plus"></i>
                </a>
            </li>
            <li class="green">
                <a href="#" data-toggle="tooltip" title="Print">
                    <i class="fa fa-print" aria-hidden="true"></i>
                </a>
            </li>
            <li class="darkblue">
                <a href="@Url.Action("Index","Setup", new { area = "Academics"})" data-toggle="tooltip" title="Go To Setup">
                    <i class="fa fa-external-link-square" aria-hidden="true"></i>
                </a>
            </li>
            <li class="darkblue">
                <a href="#" data-toggle="tooltip" title="Graphical Representation" id="hideShowCharts" data-value="false">
                    <i class="fa fa-pie-chart" aria-hidden="true"></i>
                </a>
            </li>*@
    </ul>
}
    <div class="alert alert-info alert-dismissable cannotAutoClose h4" style="margin-top:15px;margin-bottom:6px">
        <button type="button" class="close" data-dismiss="alert">×</button>

        <p style="padding-top:5px !important;">
            <strong>[<i class="fa fa-info"></i>]</strong> Messages with status <strong>Pending</strong> and <strong>Current Date</strong> will be sent only.

        </p>
    </div>
@Html.Partial("_PartialAlerts")


    @using (Ajax.BeginForm("SearchMsgs", "Messaging",
        new AjaxOptions { HttpMethod = "POST", OnSuccess = "onSearchSuccess", OnFailure = "OnSearchFailure" },
        new { @class = "form-inline" }))
    {
        @Html.HiddenFor(s => s.ModuleId)
        @Html.HiddenFor(s => s.BatchNo)
        <div class="vbox">
            @*<div class="col-sm-2" style="padding-left:5px">
                    @Html.DropDownListFor(model => model.SearchMessage.Batch, new SelectList(ViewBag.BatchDD, "Value", "Text"), "-All Batches-", new { @style = "width:100%", @class = "" })
                    @Html.ValidationMessageFor(model => model.SearchMessage.Batch, "", new { @class = "text-danger" })
                </div>*@
            <div class="col-sm-2" style="padding-left: 1px">
                @Html.DropDownListFor(model => model.SearchMessage.TemplateTypeId, new SelectList(ViewBag.TypesDD, "Value", "Text"), "-All Templates-", new { @style = "width:100%", @class = "" })
                @Html.ValidationMessageFor(model => model.SearchMessage.TemplateTypeId, "", new { @class = "text-danger" })
            </div>
            <div class="col-sm-2" style="padding-left: 1px">
                @Html.DropDownListFor(model => model.SearchMessage.Status, new SelectList(ViewBag.StatusDD, "Value", "Text"), "All Message Status", new { @style = "width:100%", @class = "" })
                @Html.ValidationMessageFor(model => model.SearchMessage.Status, "", new { @class = "text-danger" })
            </div>
            <div class="col-sm-2" style="padding-left: 1px">
                @Html.EditorFor(model => model.SearchMessage.MobileNo, new{htmlAttributes = new {@class = "form-control", @placeholder = "MobileNo", @style = "padding-bottom: 2px !important;padding-top: 2px !important;height: 31px; width: 100%;"}})
                @Html.ValidationMessageFor(model => model.SearchMessage.MobileNo, "", new { @class = "text-danger" })
            </div>

            <button type="submit" class="btn btn-success">Search</button>
        </div>

    }

<div id="smsGrid">
    @if (Model.SmsQuesList != null && Model.SmsQuesList.Any())
    {
        @Html.Partial("_PartialMsgsQueGrid", Model)
    }
</div>




<script>
                 $('#extendedPageHeader').html(`<p style="margin:12px 0px">
                @{
                    var batch = FAPP.Controllers.MessagingController.SearchMessage.Batch != null ? FAPP.Controllers.MessagingController.SearchMessage.Batch.ToString() : "";
                <label class="label label-green" title=" Batch Number :"> Batch No : @(batch)</label>
                } </p>`);
</script>